# NagaAgent 4.0

![NagaAgent Logo](https://img.shields.io/badge/NagaAgent-4.0-blue?style=for-the-badge&logo=python&logoColor=white)
![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20macOS%20%7C%20Linux-green?style=for-the-badge)
![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)
![Python](https://img.shields.io/badge/Python-3.11-blue?style=for-the-badge&logo=python)
![Status](https://img.shields.io/badge/Status-Active-brightgreen?style=for-the-badge)

![Star History](https://img.shields.io/github/stars/Xxiii8322766509/NagaAgent?style=social)![Forks](https://img.shields.io/github/forks/Xxiii8322766509/NagaAgent?style=social)![Issues](https://img.shields.io/github/issues/Xxiii8322766509/NagaAgent)![Pull Requests](https://img.shields.io/github/issues-pr/Xxiii8322766509/NagaAgent)
![UI é¢„è§ˆ](ui/README.jpg)

---

**ğŸ æ™ºèƒ½å¯¹è¯åŠ©æ‰‹ | å¤šå¹³å°æ”¯æŒ | ä¸°å¯Œç”Ÿæ€ | æ˜“äºæ‰©å±•**

## ğŸ¬ å¿«é€Ÿå…¥é—¨è§†é¢‘

**[ç‚¹å‡»è§‚çœ‹ NagaAgent 4.0 ä»‹ç»è§†é¢‘](https://www.pylindex.top/naga/intro.mp4)**

---

NagaAgent æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ™ºèƒ½å¯¹è¯åŠ©æ‰‹ï¼Œé›†æˆäº†å…ˆè¿›çš„äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œæä¾›è‡ªç„¶è¯­è¨€äº¤äº’ã€æ™ºèƒ½ä»»åŠ¡æ‰§è¡Œã€çŸ¥è¯†å›¾è°±è®°å¿†ç­‰å¤šç§åŠŸèƒ½ã€‚é€šè¿‡æ¨¡å—åŒ–çš„ MCP (Model Context Protocol) æœåŠ¡æ¶æ„ï¼Œæ”¯æŒçµæ´»çš„åŠŸèƒ½æ‰©å±•å’Œè‡ªå®šä¹‰ Agent å¼€å‘ã€‚

---

### ğŸ¯ é¡¹ç›®äº®ç‚¹

âœ… **ğŸ§  æ™ºèƒ½è®°å¿†**: åŸºäº Neo4j çš„ GRAG çŸ¥è¯†å›¾è°±è®°å¿†ç³»ç»Ÿï¼Œè‡ªåŠ¨æå–å’Œè®°å¿†å¯¹è¯å†…å®¹
âœ… **ğŸ”§ ä¸°å¯Œç”Ÿæ€**: å†…ç½® 20+ MCP æœåŠ¡ï¼Œæ¶µç›–æ–‡ä»¶æ“ä½œã€æµè§ˆå™¨æ§åˆ¶ã€ç³»ç»Ÿç®¡ç†ç­‰é¢†åŸŸ
âœ… **ğŸ¤ è¯­éŸ³äº¤äº’**: æ”¯æŒå®æ—¶è¯­éŸ³è¾“å…¥è¾“å‡ºï¼Œå…¼å®¹ OpenAI TTS API
âœ… **ğŸ–¥ï¸ ç°ä»£ç•Œé¢**: åŸºäº PyQt5 çš„ç²¾ç¾ GUIï¼Œæ”¯æŒ Live2D è™šæ‹Ÿå½¢è±¡
âœ… **ğŸŒ å®Œæ•´ API**: RESTful API æ¥å£ï¼Œæ”¯æŒæµå¼è¾“å‡ºå’Œ SSE
âœ… **ğŸ“± ç³»ç»Ÿæ‰˜ç›˜**: å®Œæ•´çš„åå°è¿è¡Œå’Œè‡ªå¯åŠ¨æ”¯æŒ
âœ… **ğŸ¤– å¤šAgentåä½œ**: æ™ºèƒ½ä»»åŠ¡è°ƒåº¦å’Œå¤š Agent ååŒå·¥ä½œ
âœ… **ğŸŒ³ æ·±åº¦æ€è€ƒ**: åŸºäºé—ä¼ ç®—æ³•çš„å¤šåˆ†æ”¯æ€è€ƒå¼•æ“
âœ… **ğŸ”„ é…ç½®çƒ­æ›´æ–°**: å®æ—¶é…ç½®å˜æ›´ï¼Œæ— éœ€é‡å¯åº”ç”¨
âœ… **ğŸ’¾ æŒä¹…åŒ–ä¸Šä¸‹æ–‡**: é‡å¯åè‡ªåŠ¨æ¢å¤å†å²å¯¹è¯
âœ… **ğŸ›¡ï¸ å®‰å…¨å¯é **: ä¼šè¯éš”ç¦»å’Œæƒé™ç®¡ç†

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS 10.15+, Linux
- **Python**: 3.11
- **Docker**: ç”¨äº Neo4j æ•°æ®åº“ï¼ˆå¯é€‰ï¼Œä¹Ÿå¯ä½¿ç”¨neo4j desktopï¼‰

### ğŸ”§ å®‰è£…æ–¹å¼

#### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨é…ç½®

<details>
<summary><strong>Windows ç”¨æˆ·</strong></summary>

```powershell
# å…‹éš†é¡¹ç›®
git clone https://github.com/Xxiii8322766509/NagaAgent.git
cd NagaAgent

# ä¸€é”®é…ç½®ç¯å¢ƒ
.\setup.ps1

# å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
cp config.json.example config.json

# é…ç½® API å¯†é’¥
notepad config.json
```
</details>

<details>
<summary><strong>macOS ç”¨æˆ·</strong></summary>

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Xxiii8322766509/NagaAgent.git
cd NagaAgent

# ä¸€é”®é…ç½®ç¯å¢ƒ
chmod +x setup_mac.sh
./setup_mac.sh

# å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
cp config.json.example config.json

# é…ç½® API å¯†é’¥
vim config.json
```
</details>

<details>
<summary><strong>Linux ç”¨æˆ·</strong></summary>

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Xxiii8322766509/NagaAgent.git
cd NagaAgent

# å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
cp config.json.example config.json

# é…ç½® API å¯†é’¥
nano config.json
```
</details>

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨é…ç½®

<details>
<summary><strong>ä½¿ç”¨ä¼ ç»Ÿ pip å®‰è£…</strong></summary>

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Xxiii8322766509/NagaAgent.git
cd NagaAgent

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
.venv\Scripts\activate
# macOS/Linux
source .venv/bin/activate

# 4. å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.json.example config.json

# 5. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 6. é…ç½® API å¯†é’¥
# ç¼–è¾‘ config.json æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥
```
</details>

<details>
<summary><strong>ä½¿ç”¨ uv å®‰è£…ï¼ˆæ›´å¿«ï¼‰</strong></summary>

```bash
# 1. å®‰è£… uvï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/Xxiii8322766509/NagaAgent.git
cd NagaAgent

# 3. å¤åˆ¶é…ç½®æ–‡ä»¶
cp config.json.example config.json

# 4. ä½¿ç”¨ uv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
uv venv
uv pip install -r requirements.txt

# 5. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼Œuv ä¼šè‡ªåŠ¨å¤„ç†ï¼‰
source .venv/bin/activate  # Linux/macOS
.venv\Scripts\activate   # Windows

# 6. é…ç½® API å¯†é’¥
# ç¼–è¾‘ config.json æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API å¯†é’¥
```
</details>

### ğŸ—„ï¸ å¯åŠ¨ Neo4j æ•°æ®åº“ï¼ˆç”¨äºçŸ¥è¯†å›¾è°±ï¼‰

<details>
<summary><strong>ä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰</strong></summary>

```bash
# å¯åŠ¨ Neo4j å®¹å™¨
docker run -d \
  --restart always \
  --name naga-neo4j \
  --publish=7474:7474 \
  --publish=7687:7687 \
  --env NEO4J_AUTH=neo4j/your_password \
  --volume=neo4j_data:/data \
  neo4j:latest
```

å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–ç«¯å£ï¼š
```bash
--publish=8474:7474 --publish=8687:7687
```
</details>

<details>
<summary><strong>ä¸ä½¿ç”¨ Docker</strong></summary>

1. ä¸‹è½½å¹¶å®‰è£… Neo4j Desktop
2. åˆ›å»ºæ–°é¡¹ç›®å¹¶å¯åŠ¨æ•°æ®åº“
3. åœ¨ config.json ä¸­é…ç½®è¿æ¥å‚æ•°
</details>

### âš™ï¸ é…ç½® API å¯†é’¥

ç¼–è¾‘ `config.json` æ–‡ä»¶ï¼Œè®¾ç½® LLM APIï¼š

```json
{
  "api": {
    "api_key": "your-api-key-here",
    "base_url": "https://api.deepseek.com",
    "model": "deepseek-chat",
    "temperature": 0.7,
    "max_tokens": 8192
  }
}
```

æ”¯æŒæ‰€æœ‰æä¾›OpenAIå…¼å®¹æ¥å£çš„æ¨¡å‹æœåŠ¡å•†ã€‚
### ğŸš€ å¯åŠ¨åº”ç”¨

<details>
<summary><strong>Windows å¯åŠ¨æ–¹å¼</strong></summary>

```powershell
.\start_with_tray.bat
```
</details>

<details>
<summary><strong>macOS/Linux å¯åŠ¨æ–¹å¼</strong></summary>

```bash
# ç›´æ¥å¯åŠ¨
python main.py

# æˆ–ä½¿ç”¨è„šæœ¬
./start.sh
```
</details>

å¯åŠ¨åå°†è‡ªåŠ¨å¼€å¯ï¼š
- ğŸ–¥ï¸ PyQt5 å›¾å½¢ç•Œé¢ï¼ˆç«¯å£æ— éœ€é…ç½®ï¼‰
- ğŸŒ RESTful API æœåŠ¡å™¨ï¼ˆé»˜è®¤ 8000ï¼‰
- ğŸ¤– Agent æœåŠ¡å™¨ï¼ˆé»˜è®¤ 8001ï¼‰
- ğŸ”§ MCP æœåŠ¡å™¨ï¼ˆé»˜è®¤ 8003ï¼‰
- ğŸ¤ TTS è¯­éŸ³æœåŠ¡ï¼ˆé»˜è®¤ 5048ï¼‰
- ğŸ§  GRAG çŸ¥è¯†å›¾è°±ç³»ç»Ÿ

---

## ğŸ“ é¡¹ç›®æ¶æ„

NagaAgent 4.0 é‡‡ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œå„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ä¸”å¯æ‰©å±•ï¼š

```
NagaAgent/
â”œâ”€â”€ ğŸ“ main.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ ğŸ“ config.json            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ apiserver/             # API æœåŠ¡å±‚ï¼ˆç«¯å£ 8000ï¼‰
â”‚   â”œâ”€â”€ api_server.py         # FastAPI ä¸»æœåŠ¡å™¨
â”‚   â”œâ”€â”€ llm_service.py        # LLM æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ message_manager.py    # æ¶ˆæ¯ç®¡ç†å™¨
â”‚   â””â”€â”€ streaming_tool_extractor.py  # æµå¼å·¥å…·æå–
â”œâ”€â”€ ğŸ“ agentserver/           # Agent æœåŠ¡å±‚ï¼ˆç«¯å£ 8001ï¼‰
â”‚   â”œâ”€â”€ agent_server.py       # Agent ç®¡ç†æœåŠ¡å™¨
â”‚   â”œâ”€â”€ agent_manager.py      # Agent ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â””â”€â”€ agent_computer_control/  # ç”µè„‘æ§åˆ¶ Agent
â”œâ”€â”€ ğŸ“ mcpserver/             # MCP æœåŠ¡å±‚ï¼ˆç«¯å£ 8003ï¼‰
â”‚   â”œâ”€â”€ mcp_server.py         # MCP ä¸»æœåŠ¡å™¨
â”‚   â”œâ”€â”€ mcp_manager.py        # MCP æœåŠ¡ç®¡ç†å™¨
â”‚   â”œâ”€â”€ mcp_registry.py       # æœåŠ¡æ³¨å†Œä¸­å¿ƒ
â”‚   â”œâ”€â”€ agent_bilibili_video/ # Bç«™è§†é¢‘ Agent
â”‚   â”œâ”€â”€ agent_comic_downloader/  # æ¼«ç”»ä¸‹è½½ Agent
â”‚   â”œâ”€â”€ agent_crawl4ai/       # ç½‘é¡µçˆ¬è™« Agent
â”‚   â”œâ”€â”€ agent_memory/         # è®°å¿†ç®¡ç† Agent
â”‚   â”œâ”€â”€ agent_naga_portal/    # Naga é—¨æˆ· Agent
â”‚   â”œâ”€â”€ agent_online_search/  # åœ¨çº¿æœç´¢ Agent
â”‚   â”œâ”€â”€ agent_playwright_master/  # æµè§ˆå™¨è‡ªåŠ¨åŒ– Agent
â”‚   â”œâ”€â”€ agent_weather_time/   # å¤©æ°”æ—¶é—´ Agent
â”‚   â””â”€â”€ agent_system_control/ # ç³»ç»Ÿæ§åˆ¶ Agent
â”œâ”€â”€ ğŸ“ summer_memory/         # GRAG çŸ¥è¯†å›¾è°±ç³»ç»Ÿ
â”‚   â”œâ”€â”€ memory_manager.py     # è®°å¿†ç®¡ç†å™¨
â”‚   â”œâ”€â”€ quintuple_extractor.py  # äº”å…ƒç»„æå–å™¨
â”‚   â”œâ”€â”€ graph.py             # Neo4j å›¾æ“ä½œ
â”‚   â””â”€â”€ rag_query_tri.py     # RAG æŸ¥è¯¢å¼•æ“
â”œâ”€â”€ ğŸ“ voice/                # è¯­éŸ³äº¤äº’ç³»ç»Ÿ
â”‚   â”œâ”€â”€ input/               # è¯­éŸ³è¾“å…¥ï¼ˆASRï¼‰
â”‚   â”‚   â””â”€â”€ unified_voice_manager.py  # ç»Ÿä¸€è¯­éŸ³ç®¡ç†
â”‚   â””â”€â”€ output/              # è¯­éŸ³è¾“å‡ºï¼ˆTTSï¼‰
â”‚       â”œâ”€â”€ tts_handler.py   # TTS å¤„ç†å™¨
â”‚       â””â”€â”€ server.py        # TTS æœåŠ¡å™¨
â”œâ”€â”€ ğŸ“ ui/                   # ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ pyqt_chat_window.py  # ä¸»èŠå¤©çª—å£
â”‚   â”œâ”€â”€ message_renderer.py  # æ¶ˆæ¯æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ live2d/             # Live2D è™šæ‹Ÿå½¢è±¡
â”‚   â””â”€â”€ tray/               # ç³»ç»Ÿæ‰˜ç›˜
â”œâ”€â”€ ğŸ“ system/              # ç³»ç»Ÿæ ¸å¿ƒ
â”‚   â”œâ”€â”€ config.py           # å…¨å±€é…ç½®
â”‚   â””â”€â”€ system_checker.py   # ç³»ç»Ÿæ£€æµ‹
â””â”€â”€ ğŸ“ mqtt_tool/           # MQTT å·¥å…·
```

---

## ğŸ› ï¸ è¯¦ç»†å®‰è£…æŒ‡å—

### ğŸ“¦ ä¾èµ–ç®¡ç†

NagaAgent ä½¿ç”¨ `nagaagent-core` æ ¸å¿ƒåŒ…æ•´åˆäº†ä¸»è¦ä¾èµ–ï¼š

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# æˆ–ä½¿ç”¨ uvï¼ˆæ›´å¿«ï¼‰
pip install uv
uv pip install -r requirements.txt
```

### ğŸ” ç³»ç»Ÿç¯å¢ƒæ£€æµ‹

```bash
# è¿è¡Œç¯å¢ƒæ£€æµ‹
python main.py --check-env

# æ£€æŸ¥å†…å®¹åŒ…æ‹¬ï¼š
- Python ç‰ˆæœ¬å…¼å®¹æ€§
- è™šæ‹Ÿç¯å¢ƒçŠ¶æ€
- æ ¸å¿ƒä¾èµ–åŒ…å®Œæ•´æ€§
- é…ç½®æ–‡ä»¶æœ‰æ•ˆæ€§
- ç«¯å£å¯ç”¨æ€§
- Neo4j è¿æ¥çŠ¶æ€
```

### âš ï¸ å¸¸è§é—®é¢˜è§£å†³

<details>
<summary><strong>Windows ç¯å¢ƒé—®é¢˜</strong></summary>

**é—®é¢˜ï¼šC++ ç¼–è¯‘å·¥å…·ç¼ºå¤±**
```powershell
# ä¸‹è½½å®‰è£… Microsoft Visual C++ Build Tools
# https://visualstudio.microsoft.com/visual-cpp-build-tools/
```

**é—®é¢˜ï¼šæƒé™é”™è¯¯**
```powershell
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
```
</details>

<details>
<summary><strong>macOS ç¯å¢ƒé—®é¢˜</strong></summary>

**é—®é¢˜ï¼šPython ç‰ˆæœ¬è¿‡ä½**
```bash
brew install python@3.11
echo 'export PATH="/usr/local/opt/python@3.11/bin:$PATH"' >> ~/.zshrc
```

**é—®é¢˜ï¼šPyAudio å®‰è£…å¤±è´¥**
```bash
brew install portaudio
pip install pyaudio
```
</details>

<details>
<summary><strong>Linux ç¯å¢ƒé—®é¢˜</strong></summary>

**é—®é¢˜ï¼šç³»ç»Ÿä¾èµ–ç¼ºå¤±**
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3-dev portaudio19-dev

# CentOS/RHEL
sudo yum install python3-devel portaudio-devel
```

**é—®é¢˜ï¼šDocker æƒé™**
```bash
sudo usermod -aG docker $USER
newgrp docker
```
</details>

---

## âš™ï¸ é…ç½®è¯´æ˜

### å®Œæ•´é…ç½®æ–‡ä»¶ç¤ºä¾‹

`config.json` åŒ…å«æ‰€æœ‰æ¨¡å—çš„é…ç½®ï¼š

```json
{
  "system": {
    "version": "4.0",
    "ai_name": "å¨œè¿¦æ—¥è¾¾",
    "debug": true,
    "log_level": "DEBUG"
  },
  "api": {
    "api_key": "your-api-key",
    "base_url": "https://api.deepseek.com",
    "model": "deepseek-chat",
    "temperature": 0.7,
    "max_tokens": 8192,
    "persistent_context": true,
    "context_load_days": 3
  },
  "api_server": {
    "enabled": true,
    "host": "127.0.0.1",
    "port": 8000,
    "auto_start": true,
    "docs_enabled": true
  },
  "grag": {
    "enabled": true,
    "auto_extract": true,
    "context_length": 5,
    "similarity_threshold": 0.6,
    "neo4j_uri": "neo4j://127.0.0.1:7687",
    "neo4j_user": "neo4j",
    "neo4j_password": "your_password"
  },
  "voice_realtime": {
    "enabled": false,
    "provider": "qwen",
    "api_key": "your-dashscope-api-key",
    "model": "qwen3-omni-flash-realtime"
  },
  "live2d": {
    "enabled": false,
    "model_path": "ui/live2d/live2d_models/characters/llny/mianfeimox/llny.model3.json",
    "fallback_image": "ui/standby.png"
  },
  "online_search": {
    "searxng_url": "https://searxng.pylindex.top",
    "engines": ["google", "bing", "duckduckgo"],
    "num_results": 5
  }
}
```

### é…ç½®çƒ­æ›´æ–°

NagaAgent æ”¯æŒå®æ—¶é…ç½®æ›´æ–°ï¼Œæ— éœ€é‡å¯ï¼š

```python
# é…ç½®å˜æ›´ä¼šè‡ªåŠ¨ç”Ÿæ•ˆ
# ä¿®æ”¹ config.json åä¿å­˜å³å¯
# æ”¯æŒçš„é…ç½®é¡¹ï¼š
- API å‚æ•°ï¼ˆæ¸©åº¦ã€æ¨¡å‹ç­‰ï¼‰
- ç³»ç»Ÿè®¾ç½®ï¼ˆè°ƒè¯•æ¨¡å¼ã€æ—¥å¿—çº§åˆ«ï¼‰
- GRAG å‚æ•°ï¼ˆé˜ˆå€¼ã€ä¸Šä¸‹æ–‡é•¿åº¦ï¼‰
- UI è®¾ç½®ï¼ˆé€æ˜åº¦ã€ä¸»é¢˜ï¼‰
```

---

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### 1. ğŸ§  GRAG çŸ¥è¯†å›¾è°±è®°å¿†ç³»ç»Ÿ

åŸºäº Neo4j çš„æŒä¹…åŒ–è®°å¿†ç³»ç»Ÿï¼Œèƒ½å¤Ÿï¼š
- è‡ªåŠ¨æå–å¯¹è¯ä¸­çš„å®ä½“ã€å…³ç³»å’Œå±æ€§
- æ„å»ºçŸ¥è¯†å›¾è°±å¹¶è¿›è¡Œå¯è§†åŒ–
- åŸºäºç›¸ä¼¼åº¦çš„æ™ºèƒ½æ£€ç´¢
- æ”¯æŒå†å²å¯¹è¯å¯¼å…¥

### 2. ğŸ”§ MCP æœåŠ¡ç”Ÿæ€

å†…ç½®ä¸°å¯Œçš„ MCP æœåŠ¡ï¼š

| æœåŠ¡åç§° | åŠŸèƒ½æè¿° | è°ƒç”¨ç¤ºä¾‹ |
|---------|---------|---------|
| computer_control | ç”µè„‘æ§åˆ¶ï¼ˆé¼ æ ‡é”®ç›˜ï¼‰ | ç‚¹å‡»ã€è¾“å…¥ã€æˆªå›¾ |
| file_manager | æ–‡ä»¶ç®¡ç† | è¯»å†™ã€æœç´¢ã€ç¼–è¾‘ |
| coder | ä»£ç æ‰§è¡Œ | Python ä»£ç è¿è¡Œ |
| weather_time | å¤©æ°”æŸ¥è¯¢ | å®æ—¶å¤©æ°”ã€æ—¶é—´ |
| comic_downloader | æ¼«ç”»ä¸‹è½½ | æ”¯æŒå¤šå¹³å° |
| bilibili_video | Bç«™è§†é¢‘ | æœç´¢ã€ä¸‹è½½ |
| memory | è®°å¿†ç®¡ç† | æŸ¥è¯¢ã€ç®¡ç†çŸ¥è¯†å›¾è°± |
| system_control | ç³»ç»Ÿæ§åˆ¶ | éŸ³é‡ã€äº®åº¦ã€WiFi |
| online_search | åœ¨çº¿æœç´¢ | Googleã€Bing æœç´¢ |

### 3. ğŸ¤ å®æ—¶è¯­éŸ³äº¤äº’

- **è¯­éŸ³è¾“å…¥**ï¼šæ”¯æŒå¤šç§ ASR å¼•æ“
- **è¯­éŸ³è¾“å‡º**ï¼šå…¼å®¹ OpenAI TTS API
- **æµå¼å¤„ç†**ï¼šè¾¹è¯´è¾¹å¬ï¼Œå®æ—¶äº¤äº’
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šä¸­æ–‡ã€è‹±æ–‡ç­‰å¤šç§è¯­è¨€

### 4. ğŸ¤– å¤š Agent åä½œ

æ™ºèƒ½ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼š
- æ„å›¾è¯†åˆ«å’Œä»»åŠ¡åˆ†è§£
- å¤š Agent å¹¶è¡Œæ‰§è¡Œ
- ç»“æœæ•´åˆå’Œåé¦ˆ
- æ”¯æŒå¤æ‚å·¥ä½œæµ

### 5. ğŸ­ Live2D è™šæ‹Ÿå½¢è±¡

- ç‹¬ç«‹ Live2D æ¸²æŸ“å¼•æ“
- ä¸°å¯Œçš„åŠ¨ç”»å’Œè¡¨æƒ…
- é¼ æ ‡äº¤äº’å“åº”
- è‡ªåŠ¨å›é€€åˆ°é™æ€å›¾ç‰‡

### 6. ğŸŒ³ æ·±åº¦æ€è€ƒå¼•æ“

åŸºäºé—ä¼ ç®—æ³•çš„æ€è€ƒç³»ç»Ÿï¼š
- å¤šåˆ†æ”¯å¹¶è¡Œæ€è€ƒ
- é—®é¢˜éš¾åº¦è¯„ä¼°
- ç”¨æˆ·åå¥½å­¦ä¹ 
- æ€è€ƒè·¯å¾„ä¼˜åŒ–

---

## ğŸŒ RESTful API æœåŠ¡

### API æœåŠ¡å™¨ï¼ˆç«¯å£ 8000ï¼‰

æä¾›å®Œæ•´çš„ REST API æ¥å£ï¼š

#### æ ¸å¿ƒç«¯ç‚¹

```http
# æµå¼å¯¹è¯
POST /chat/stream
Content-Type: application/json

{
  "message": "ä½ å¥½",
  "session_id": "user123",
  "stream": true
}

# æ™®é€šå¯¹è¯
POST /chat
Content-Type: application/json

{
  "message": "å¸®æˆ‘å†™ä¸ªPythonè„šæœ¬",
  "session_id": "user123"
}

# ä¼šè¯ç®¡ç†
GET /sessions          # è·å–æ‰€æœ‰ä¼šè¯
GET /sessions/{id}     # è·å–ä¼šè¯è¯¦æƒ…
DELETE /sessions/{id}  # åˆ é™¤ä¼šè¯

# ç³»ç»Ÿä¿¡æ¯
GET /health           # å¥åº·æ£€æŸ¥
GET /system/info      # ç³»ç»Ÿä¿¡æ¯
GET /system/stats     # è¿è¡Œç»Ÿè®¡
```

#### SSE æµå¼è¾“å‡º

```javascript
// JavaScript ç¤ºä¾‹
const eventSource = new EventSource('/chat/stream');
eventSource.onmessage = function(event) {
  const data = JSON.parse(event.data);
  console.log(data.content);
};
```

### Agent æœåŠ¡å™¨ï¼ˆç«¯å£ 8001ï¼‰

Agent ä»»åŠ¡è°ƒåº¦æ¥å£ï¼š

```http
# æäº¤ä»»åŠ¡
POST /tasks
{
  "agent_name": "computer_control",
  "task": {"action": "click", "x": 100, "y": 200}
}

# æŸ¥è¯¢ä»»åŠ¡
GET /tasks/{task_id}

# è·å–èƒ½åŠ›åˆ—è¡¨
GET /capabilities
```

### MCP æœåŠ¡å™¨ï¼ˆç«¯å£ 8003ï¼‰

MCP æœåŠ¡ç®¡ç†æ¥å£ï¼š

```http
# è·å–æ‰€æœ‰æœåŠ¡
GET /mcp/services

# è·å–æœåŠ¡è¯¦æƒ…
GET /mcp/services/{service_name}

# æ‰§è¡Œå·¥å…·
POST /mcp/services/{service_name}/tools/{tool_name}
```

---

## ğŸ”§ å·¥å…·è°ƒç”¨ç³»ç»Ÿ

### è°ƒç”¨æ ¼å¼

#### MCP æœåŠ¡è°ƒç”¨
```json
{
  "agentType": "mcp",
  "service_name": "computer_control",
  "tool_name": "click",
  "x": 100,
  "y": 200
}
```

#### Agent è°ƒç”¨
```json
{
  "agentType": "agent",
  "agent_name": "WeatherAgent",
  "prompt": "æŸ¥è¯¢åŒ—äº¬ä»Šå¤©çš„å¤©æ°”"
}
```

### è°ƒç”¨æµç¨‹

1. LLM åˆ†æç”¨æˆ·æ„å›¾
2. ç”Ÿæˆå·¥å…·è°ƒç”¨ JSON
3. ç³»ç»Ÿè§£æå¹¶è·¯ç”±åˆ°å¯¹åº”æœåŠ¡
4. æ‰§è¡Œå·¥å…·å¹¶è¿”å›ç»“æœ
5. LLM å¤„ç†ç»“æœå¹¶ç»§ç»­æˆ–ç»“æŸ

### æœ€å¤§å¾ªç¯æ¬¡æ•°

- æµå¼æ¨¡å¼ï¼š5 æ¬¡
- éæµå¼æ¨¡å¼ï¼š5 æ¬¡
- å¯åœ¨é…ç½®æ–‡ä»¶ä¸­è°ƒæ•´

---

## ğŸ“ å¼€å‘æŒ‡å—

### åˆ›å»ºè‡ªå®šä¹‰ Agent

1. **åˆ›å»º MCP ç±»å‹ Agent**

```python
# mcpserver/agent_mytool/agent_mytool.py
from mcpserver.agents import Agent

class MyToolAgent(Agent):
    def __init__(self):
        super().__init__(
            name="my_tool",
            description="æˆ‘çš„è‡ªå®šä¹‰å·¥å…·"
        )

    async def handle_handoff(self, **kwargs):
        # å®ç°å·¥å…·é€»è¾‘
        return {"result": "æ‰§è¡ŒæˆåŠŸ"}
```

2. **åˆ›å»º agent-manifest.json**

```json
{
  "name": "my_tool",
  "displayName": "æˆ‘çš„å·¥å…·",
  "description": "è‡ªå®šä¹‰å·¥å…·æè¿°",
  "version": "1.0.0",
  "agentType": "mcp",
  "entryPoint": {
    "module": "agent_mytool.agent_mytool",
    "class": "MyToolAgent"
  }
}
```

3. **é‡å¯æœåŠ¡è‡ªåŠ¨æ³¨å†Œ**

### Agent é…ç½®æœ€ä½³å®è·µ

1. ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
2. åˆç†è®¾ç½® temperature å’Œ max_tokens
3. ä¼˜åŒ–æç¤ºè¯ï¼Œä½¿ç”¨å ä½ç¬¦
4. è®¾ç½®åˆç†çš„ä¼šè¯ TTL

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. å¯ç”¨é…ç½®ç¼“å­˜
2. æ§åˆ¶å¹¶å‘ Agent æ•°é‡
3. å®šæœŸæ¸…ç†è¿‡æœŸä¼šè¯
4. ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æŸ¥çœ‹è¿è¡Œæ—¥å¿—ï¼Ÿ

A: æ—¥å¿—ä½ç½®ï¼š
- ä¸»æ—¥å¿—ï¼š`logs/naga_agent.log`
- API æ—¥å¿—ï¼š`logs/api_server.log`
- MCP æ—¥å¿—ï¼š`logs/mcp_server.log`

### Q: å¦‚ä½•é‡ç½®çŸ¥è¯†å›¾è°±ï¼Ÿ

A:
```bash
# æ¸…ç©º Neo4j æ•°æ®
docker exec -it naga-neo4j cypher-shell -u neo4j -p your_password "MATCH (n) DETACH DELETE n"
```

### Q: ç«¯å£å†²çªæ€ä¹ˆåŠï¼Ÿ

A: ä¿®æ”¹ `config.json` ä¸­çš„ç«¯å£é…ç½®ï¼š
```json
{
  "api_server": {"port": 8001},
  "agentserver": {"port": 8002},
  "mcpserver": {"port": 8004}
}
```

### Q: å¦‚ä½•å¤‡ä»½é…ç½®å’Œæ•°æ®ï¼Ÿ

A:
```bash
# å¤‡ä»½é…ç½®
cp config.json config.json.backup

# å¤‡ä»½ Neo4j æ•°æ®
docker exec naga-neo4j neo4j-admin dump --database=neo4j --to=/dump/backup.dump
```

### Q: å¦‚ä½•å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Ÿ

A: ä¿®æ”¹ `config.json`ï¼š
```json
{
  "system": {
    "debug": true,
    "log_level": "DEBUG"
  }
}
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'Add some AmazingFeature'`)
4. **æ¨é€åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **æäº¤ Pull Request**

### å¼€å‘è§„èŒƒ

- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿æµ‹è¯•é€šè¿‡
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### è”ç³»æ–¹å¼

- **Issues**: [GitHub Issues](https://github.com/Xxiii8322766509/NagaAgent/issues)
- **è®¨è®º**: [GitHub Discussions](https://github.com/Xxiii8322766509/NagaAgent/discussions)
- **é‚®ç®±**: 1781393885@qq.com

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œè´¡çŒ®è€…ï¼š

- [OpenAI](https://openai.com/) - å¼ºå¤§çš„ AI æ¨¡å‹
- [Neo4j](https://neo4j.com/) - å›¾æ•°æ®åº“
- [PyQt5](https://riverbankcomputing.com/software/pyqt/) - GUI æ¡†æ¶
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£ Web æ¡†æ¶
- [MCP](https://modelcontextprotocol.io/) - æ¨¡å‹ä¸Šä¸‹æ–‡åè®®
- æ‰€æœ‰è´¡çŒ®è€…å’Œç¤¾åŒºæˆå‘˜

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

<div align="center">
**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**
</div>